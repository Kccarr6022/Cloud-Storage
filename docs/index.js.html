<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useContext, useEffect, useState } from 'react'
import { Context } from '../../store/appContext'
import { useNavigate } from 'react-router-dom'
import './index.scss'

const VideoCard = props => {
  const { store } = useContext(Context)
  const [videoExists, setVideoExists] = useState(true)
  const [prompt, setPrompt] = useState(null)
  let navigate = useNavigate()

  const handledelete = () => {
    setPrompt('Would you like to delete this video')
  }

  const handleNo = () => {
    setPrompt(null)
  }

  /**
   * Requests to delete video owned by user
   * @parms void 
   * @return void
   */
  const deleteVideo = async () => {
    const opts = {
      method: 'delete',
      headers: {
        Accept: 'application/json',
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        user_id: store.token, // current foreign key (change)
        video_id: props.video['name'], // current primary key (change)
      }),
    }
    await fetch(process.env.REACT_APP_SERVICE_URI + 'api/delete_video', opts)
      .then(resp => resp.json())
      .then(resp => {
        if (resp.status === 200) {
          setVideoExists(false)
        } else {
          setPrompt('You are unauthorized to do delete this video.')
        }
      })
      .catch(error => {
        console.log('An error occured', error)
      })
  }

  return (
    &lt;>
      {videoExists ? (
        prompt == null ? (
          &lt;div id='videocard'>
            &lt;h1 className='video-name'>{props.video['name']}&lt;/h1>
            &lt;h1 className='video-type'>{props.video['event_type']}&lt;/h1>
            &lt;video autoPlay muted src={props.video['url']} width='200px' height='125px' />
            &lt;h1 className='video-date'>
              {props.video['date']} {props.video['time']}
            &lt;/h1>
            &lt;button>
              &lt;a href={props.video['url']}> Download &lt;/a>
            &lt;/button>
            &lt;button
              onClick={() => {
                let video = props.video['url']
                video = video.split('.com/')[1]
                navigate(`/watch/${video}`)
              }}
            >
              Watch
            &lt;/button>
            &lt;button onClick={handledelete}>Del&lt;/button>
          &lt;/div>
        ) : (
          &lt;>
            &lt;div id='promptcard'>
              &lt;h1 className='prompt'>{prompt}&lt;/h1>

              &lt;button onClick={deleteVideo}>Yes&lt;/button>
              &lt;br />
              &lt;button onClick={handleNo}>No&lt;/button>
            &lt;/div>
          &lt;/>
        )
      ) : null}
    &lt;/>
  )
}

export default VideoCard
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.0</a> on Fri Dec 09 2022 17:01:44 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
